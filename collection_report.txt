[1m============================= test session starts ==============================[0m
platform linux -- Python 3.12.3, pytest-8.4.1, pluggy-1.6.0
Using --randomly-seed=443184585
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /home/drj/projects/mem0-stack
configfile: pytest.ini
testpaths: tests, openmemory/api/tests, mem0/tests, shared/tests
plugins: sugar-1.0.0, clarity-1.0.1, Faker-37.4.0, anyio-4.9.0, xdist-3.8.0, env-1.1.5, html-4.1.1, metadata-3.1.1, randomly-3.16.0, mimesis-18.0.0, timeout-2.4.0, pytest_httpserver-1.1.3, datadir-1.7.2, factoryboy-2.8.1, bdd-8.1.0, picked-0.5.1, fixtures-0.1.0, allure-pytest-2.14.3, cov-6.2.1, socket-0.7.0, mock-3.14.1, langsmith-0.4.5, asyncio-1.0.0, json-report-1.5.0, testmon-2.1.3, hypothesis-6.135.29, benchmark-5.1.0
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 576 items / 5 errors / 1 skipped
run-last-failure: None

<Dir mem0-stack>
  <Dir tests>
    <Module test_coding_memory_optimizations.py>
      <Class TestCodingMemoryConfig>
        <Function test_default_config_creation>
        <Function test_custom_config_creation>
        <Function test_autonomous_storage_config>
        <Function test_coding_metadata_config>
        <Function test_performance_config>
      <Class TestCodingFactExtractor>
        <Function test_get_coding_fact_extraction_prompt>
        <Function test_categorize_coding_fact_bug_fix>
        <Function test_categorize_coding_fact_architecture>
        <Function test_categorize_coding_fact_performance>
        <Function test_categorize_coding_fact_configuration>
        <Function test_categorize_coding_fact_testing>
        <Function test_categorize_coding_fact_debugging>
        <Function test_categorize_coding_fact_refactoring>
        <Function test_categorize_coding_fact_default>
        <Function test_extract_coding_metadata_file_references>
        <Function test_extract_coding_metadata_code_indicators>
        <Function test_extract_coding_metadata_error_indicators>
        <Function test_extract_coding_metadata_solution_indicators>
      <Class TestCodingMemory>
        <Function test_coding_memory_initialization>
        <Function test_add_coding_context_with_context>
        <Function test_search_coding_context>
        <Function test_should_store_coding_fact_with_high_similarity>
        <Function test_should_store_coding_fact_with_low_similarity>
        <Function test_rank_coding_results>
        <Function test_get_coding_analytics>
      <Class TestCreateCodingOptimizedConfig>
        <Function test_create_default_config>
        <Function test_create_config_with_base>
      <Class TestIntegrationScenarios>
        <Function test_bug_fix_scenario>
        <Function test_architecture_scenario>
        <Function test_performance_scenario>
      <Class TestEnhancedDeduplication>
        <Function test_enhanced_deduplicator_initialization>
        <Function test_should_deduplicate_exact_match>
        <Function test_should_deduplicate_different_facts>
        <Function test_semantic_similarity_calculation>
        <Function test_context_similarity_calculation>
        <Function test_temporal_factor_calculation>
        <Function test_complementary_information_detection>
        <Function test_progressive_refinement_detection>
        <Function test_update_threshold>
        <Function test_deduplication_stats>
      <Class TestAutonomousDeduplicationManager>
        <Function test_autonomous_manager_initialization>
        <Function test_process_memory_with_deduplication>
        <Function test_process_memory_without_deduplication>
        <Function test_confidence_calculation>
        <Function test_reasoning_generation>
        <Function test_performance_report>
        <Function test_performance_metrics_reset>
      <Class TestDeduplicationIntegration>
        <Function test_coding_memory_with_enhanced_deduplication>
        <Function test_deduplication_analytics_retrieval>
        <Function test_deduplication_performance_testing>
      <Class TestDeduplicationUtilities>
        <Function test_calculate_content_hash>
        <Function test_extract_key_features>
        <Function test_similarity_based_clustering>
        <Function test_calculate_simple_similarity>
      <Class TestConfidenceScoring>
        <Function test_enhanced_confidence_scorer_initialization>
        <Function test_calculate_confidence_high_quality>
        <Function test_context_aware_confidence_scorer>
      <Class TestMemoryCategorization>
        <Function test_hierarchical_categorizer_initialization>
        <Function test_categorize_memory_bug_fix>
        <Function test_auto_categorizer>
      <Class TestStorageOptimization>
        <Function test_intelligent_storage_manager_initialization>
        <Function test_check_storage_limits>
        <Function test_optimize_storage_lru>
        <Function test_autonomous_storage_manager>
      <Class TestMetadataTagging>
        <Function test_semantic_tagger_initialization>
        <Function test_tag_memory_comprehensive>
        <Function test_auto_tagging_manager>
    <Module test_memory_regression_prevention.py>
      <UnitTestCase TestMemoryRegressionPrevention>
        <TestCaseFunction test_code_content_processing>
        <TestCaseFunction test_embedding_pattern_safety>
        <TestCaseFunction test_error_handling_robustness>
        <TestCaseFunction test_long_content_memory_creation>
        <TestCaseFunction test_memory_creation_performance>
        <TestCaseFunction test_procedural_memory_pattern_safety>
        <TestCaseFunction test_special_characters_in_memory>
      <UnitTestCase TestRegressionIntegration>
        <TestCaseFunction test_full_memory_workflow_with_large_content>
    <Module test_performance_batching.py>
      <Class TestBatchingPerformance>
        <Coroutine test_batch_processor_performance>
        <Coroutine test_priority_batching_performance>
        <Coroutine test_memory_write_batcher_performance>
        <Coroutine test_vector_search_batcher_performance>
        <Coroutine test_graph_query_batcher_performance>
        <Coroutine test_batching_manager_performance>
        <Coroutine test_batch_timeout_handling>
        <Coroutine test_batch_error_recovery>
        <Function test_batch_metrics_performance>
        <Function test_batch_configuration_validation>
    <Module test_performance_caching.py>
      <Class TestCachePerformance>
        <Coroutine test_l1_cache_performance>
        <Coroutine test_l2_cache_performance>
        <Coroutine test_l3_cache_performance>
        <Coroutine test_multi_layer_cache_performance>
        <Coroutine test_cache_hit_miss_ratios_under_load>
        <Coroutine test_concurrent_cache_operations>
        <Coroutine test_memory_usage_and_cleanup>
        <Coroutine test_cache_invalidation_performance>
        <Function test_configuration_validation>
    <Module test_performance_connection_pooling.py>
      <Class TestConnectionPoolPerformance>
        <Coroutine test_postgresql_pool_performance>
        <Coroutine test_neo4j_pool_performance>
        <Coroutine test_redis_pool_performance>
        <Coroutine test_connection_pool_manager_performance>
        <Coroutine test_connection_pool_exhaustion_handling>
        <Coroutine test_connection_health_monitoring>
        <Coroutine test_concurrent_pool_operations>
        <Function test_connection_pool_metrics>
        <Function test_connection_pool_config_validation>
    <Module test_storage_optimization_timezone.py>
      <Class TestTimezoneEdgeCases>
        <Function test_mixed_timezone_scenarios>
        <Function test_dst_transition_scenarios>
        <Function test_recency_calculation_accuracy>
        <Function test_memory_age_calculation_edge_cases>
      <Class TestStorageOptimizationIntegration>
        <Function test_autonomous_optimization_timezone_consistency>
        <Function test_full_purge_workflow_with_real_timestamps>
        <Function test_scheduled_optimization_timing>
      <Class TestTimezoneRegressionTests>
        <Function test_original_timezone_bug_regression>
        <Function test_timezone_conversion_consistency>
        <Function test_memory_age_calculation_accuracy_regression>
      <Class TestPerformanceRegression>
        <Function test_timezone_operations_performance>
  <Dir openmemory>
    <Dir api>
      <Package tests>
        <Module test_api_contract_validation.py>
          <Class TestOpenAPISchemaValidation>
            <Function test_openapi_schema_generation>
            <Function test_schema_components_validation>
            <Function test_request_response_schema_definitions>
            <Function test_error_response_schemas>
          <Class TestMemoryEndpointContracts>
            <Function test_create_memory_request_contract>
            <Function test_create_memory_invalid_request_contract>
            <Function test_list_memories_response_contract>
            <Function test_list_memories_query_parameters>
            <Function test_get_memory_by_id_contract>
          <Class TestAppsEndpointContracts>
            <Function test_list_apps_response_contract>
            <Function test_apps_query_parameters>
          <Class TestStatsEndpointContracts>
            <Function test_stats_response_contract>
          <Class TestConfigEndpointContracts>
            <Function test_get_config_response_contract>
            <Function test_update_config_request_contract>
          <Class TestErrorConsistencyValidation>
            <Function test_404_error_consistency>
            <Function test_422_error_consistency>
            <Function test_500_error_consistency>
          <Class TestInputValidationComprehensive>
            <Function test_string_field_validation>
            <Function test_uuid_field_validation>
            <Function test_integer_field_validation>
            <Function test_json_field_validation>
          <Class TestPaginationContractValidation>
            <Function test_pagination_response_structure>
            <Function test_pagination_boundary_conditions>
          <Class TestContentTypeValidation>
            <Function test_json_content_type_requirement>
            <Function test_json_response_content_type>
          <Class TestAPIVersioningValidation>
            <Function test_api_version_in_urls>
            <Function test_api_version_backward_compatibility>
        <Module test_categorization_comprehensive.py>
          <Class TestCategoryGeneration>
            <Function test_get_categories_for_memory_success>
            <Function test_get_categories_for_memory_empty_result>
            <Function test_get_categories_for_memory_mixed_case_normalization>
            <Function test_get_categories_for_memory_whitespace_handling>
            <Function test_get_categories_for_memory_special_characters>
            <Function test_get_categories_for_memory_unicode_content>
          <Class TestOpenAIIntegration>
            <Function test_openai_api_call_parameters>
            <Function test_openai_structured_output_parsing>
            <Function test_openai_client_initialization>
            <Function test_openai_response_choice_access>
            <Function test_openai_temperature_zero_for_consistency>
          <Class TestRetryMechanism>
            <Function test_retry_on_temporary_failure>
            <Function test_retry_exhaustion_raises_exception>
            <Function test_retry_with_different_error_types>
            <Function test_retry_configuration_parameters>
            <Function test_exponential_backoff_behavior>
          <Class TestErrorHandling>
            <Function test_empty_memory_text>
            <Function test_very_long_memory_text>
            <Function test_none_memory_text>
            <Function test_malformed_api_response>
            <Function test_missing_parsed_attribute>
            <Function test_logging_on_error>
            <Function test_debug_logging_on_parsing_error>
          <Class TestCategoryValidation>
            <Function test_category_deduplication>
            <Function test_empty_category_filtering>
            <Function test_category_length_validation>
            <Function test_category_character_validation>
          <Class TestPerformanceAndTimeout>
            <Function test_api_timeout_handling>
            <Function test_concurrent_categorization_requests>
            <Function test_large_batch_categorization>
        <Module test_database_framework.py>
          <Class TestDatabaseFramework>
            <Function test_sqlite_test_engine>
            <Function test_postgres_test_engine>
            <Function test_database_schemas_match>
          <Class TestTransactionRollback>
            <Function test_session_rollback_on_exception>
            <Function test_manual_rollback>
            <Function test_concurrent_transactions>
            <Function test_savepoint_rollback>
          <Class TestDatabaseIntegrity>
            <Function test_foreign_key_constraints>
            <Function test_unique_constraints>
            <Function test_not_null_constraints>
            <Function test_cascade_deletes>
          <Class TestPerformanceMonitoring>
            <Function test_connection_pooling>
            <Function test_query_performance>
            <Function test_memory_usage_monitoring>
          <Class TestConcurrentAccess>
            <Function test_concurrent_reads>
            <Function test_concurrent_writes>
            <Function test_deadlock_detection>
          <Class TestDatabaseInspection>
            <Function test_table_inspection>
            <Function test_index_inspection>
            <Function test_constraint_inspection>
          <Class TestDatabaseIntegrationScenarios>
            <Function test_complete_memory_lifecycle>
            <Function test_bulk_operations_performance>
        <Module test_database_utils_comprehensive.py>
          <Class TestUserManagement>
            <Function test_get_or_create_user_existing_user>
            <Function test_get_or_create_user_new_user>
            <Function test_get_or_create_user_with_empty_user_id>
            <Function test_get_or_create_user_with_special_characters>
            <Function test_get_or_create_user_with_long_user_id>
            <Function test_get_or_create_user_database_error>
            <Function test_get_or_create_user_integrity_error>
            <Function test_get_or_create_user_query_structure>
          <Class TestAppManagement>
            <Function test_get_or_create_app_existing_app>
            <Function test_get_or_create_app_new_app>
            <Function test_get_or_create_app_with_different_users>
            <Function test_get_or_create_app_with_empty_app_name>
            <Function test_get_or_create_app_with_special_characters>
            <Function test_get_or_create_app_database_error>
            <Function test_get_or_create_app_query_structure>
          <Class TestCombinedUserAndAppManagement>
            <Function test_get_user_and_app_both_exist>
            <Function test_get_user_and_app_both_new>
            <Function test_get_user_and_app_execution_order>
            <Function test_get_user_and_app_with_user_creation_error>
            <Function test_get_user_and_app_with_app_creation_error>
            <Function test_get_user_and_app_return_type>
          <Class TestDatabaseTransactionHandling>
            <Function test_user_creation_transaction_commit>
            <Function test_app_creation_transaction_commit>
            <Function test_no_transaction_for_existing_entities>
            <Function test_transaction_rollback_on_error>
            <Function test_database_session_consistency>
          <Class TestDataIntegrityAndValidation>
            <Function test_user_id_uniqueness_constraint>
            <Function test_app_name_owner_uniqueness_constraint>
            <Function test_foreign_key_constraint>
            <Function test_data_validation_on_creation>
            <Function test_null_value_handling>
            <Function test_relationship_integrity>
        <Module test_integration.py>
          <Class TestMemoryLifecycle>
            <Coroutine test_complete_memory_workflow>
            <Coroutine test_memory_with_categories_integration>
            <Coroutine test_app_memory_relationship_integration>
          <Class TestDatabaseIntegration>
            <Coroutine test_database_transaction_rollback>
            <Coroutine test_database_connection_handling>
            <Coroutine test_database_constraints>
          <Class TestMemoryClientIntegration>
            <Coroutine test_memory_client_error_handling>
            <Coroutine test_memory_client_timeout_handling>
            <Coroutine test_memory_client_reconnection>
          <Class TestConfigurationIntegration>
            <Coroutine test_configuration_persistence>
            <Coroutine test_openmemory_config_isolation>
          <Class TestPaginationIntegration>
            <Coroutine test_memory_pagination_consistency>
            <Coroutine test_app_pagination_consistency>
          <Class TestErrorPropagation>
            <Coroutine test_database_error_propagation>
            <Coroutine test_validation_error_propagation>
          <Class TestConcurrencyIntegration>
            <Coroutine test_concurrent_memory_creation>
            <Coroutine test_concurrent_app_creation>
        <Module test_mcp_server.py>
          <Class TestMCPServerFunctionality>
            <Coroutine test_add_memories_success>
            <Coroutine test_add_memories_no_user_id>
            <Coroutine test_add_memories_no_client_name>
            <Coroutine test_add_memories_client_unavailable>
            <Coroutine test_add_memories_client_exception>
            <Coroutine test_search_memory_success>
            <Coroutine test_search_memory_no_results>
            <Coroutine test_list_memories_success>
            <Coroutine test_delete_memories_success>
            <Coroutine test_delete_memories_not_found>
          <Class TestMCPServerIntegration>
            <Coroutine test_mcp_endpoints_registered>
            <Coroutine test_mcp_context_variables>
          <Class TestMCPUtilities>
            <Function test_get_memory_client_safe_success>
            <Function test_get_memory_client_safe_none>
            <Function test_get_memory_client_safe_exception>
          <Class TestMCPErrorScenarios>
            <Coroutine test_context_variables_missing>
            <Coroutine test_malformed_input_handling>
          <Class TestMCPPerformance>
            <Coroutine test_concurrent_memory_operations>
            <Coroutine test_memory_operation_timeout>
        <Module test_memory_utils_comprehensive.py>
          <Class TestMemoryClientInitialization>
            <Function test_get_memory_client_success>
            <Function test_get_memory_client_with_custom_instructions>
            <Function test_get_memory_client_database_config_override>
            <Function test_get_memory_client_initialization_error>
            <Function test_get_memory_client_database_error>
            <Function test_reset_memory_client>
          <Class TestDockerEnvironmentDetection>
            <Function test_get_docker_host_url_not_in_docker>
            <Function test_get_docker_host_url_with_custom_host>
            <Function test_get_docker_host_url_with_host_docker_internal>
            <Function test_get_docker_host_url_with_gateway_ip>
            <Function test_get_docker_host_url_fallback>
            <Function test_fix_ollama_urls_no_config>
            <Function test_fix_ollama_urls_sets_default>
            <Function test_fix_ollama_urls_fixes_localhost>
            <Function test_fix_ollama_urls_preserves_non_localhost>
          <Class TestConfigurationParsing>
            <Function test_parse_environment_variables_simple>
            <Function test_parse_environment_variables_nested>
            <Function test_parse_environment_variables_missing_env_var>
            <Function test_parse_environment_variables_non_env_values>
            <Function test_get_config_hash_consistent>
            <Function test_get_config_hash_different_configs>
          <Class TestDefaultConfiguration>
            <Function test_get_default_memory_config_structure>
            <Function test_get_default_memory_config_environment_variables>
            <Function test_get_default_memory_config_with_custom_env_vars>
            <Function test_get_default_user_id>
          <Class TestErrorHandlingAndResilience>
            <Function test_memory_client_with_initialization_failure>
            <Function test_memory_client_persistent_failure_handling>
            <Function test_memory_client_handles_external_service_error>
            <Function test_memory_client_performance_logging>
            <Function test_memory_client_caching_behavior>
        <Module test_migration_integrity.py>
          <Class TestMigrationIntegrity>
            <Function test_migration_directory_structure>
            <Function test_alembic_config_validation>
            <Function test_migration_up_and_down>
            <Function test_migration_history_consistency>
            <Function test_migration_idempotency>
            <Function test_migration_with_existing_data>
            <Function test_migration_rollback_data_integrity>
          <Class TestMigrationDependencies>
            <Function test_migration_dependency_chain>
            <Function test_migration_branch_merging>
            <Function test_migration_circular_dependencies>
          <Class TestSchemaEvolution>
            <Function test_schema_version_tracking>
            <Function test_schema_backward_compatibility>
            <Function test_index_and_constraint_evolution>
          <Class TestMigrationPerformance>
            <Function test_migration_performance>
            <Function test_migration_with_large_dataset>
          <Class TestMigrationErrorHandling>
            <Function test_migration_failure_recovery>
            <Function test_migration_validation_errors>
            <Function test_migration_rollback_on_failure>
        <Module test_models.py>
          <Class TestUserModel>
            <Function test_user_creation>
            <Function test_user_unique_constraint>
          <Class TestAppModel>
            <Function test_app_creation>
            <Function test_app_user_relationship>
            <Function test_app_default_values>
          <Class TestMemoryModel>
            <Function test_memory_creation>
            <Function test_memory_relationships>
            <Function test_memory_state_enum>
            <Function test_memory_default_values>
          <Class TestCategoryModel>
            <Function test_category_creation>
            <Function test_category_memory_relationship>
          <Class TestMemoryAccessLogModel>
            <Function test_access_log_creation>
            <Function test_access_log_relationships>
            <Function test_access_log_default_values>
        <Module test_openapi_schema_validation.py>
          <Class TestOpenAPISpecificationCompliance>
            <Function test_openapi_version_compliance>
            <Function test_info_object_compliance>
            <Function test_paths_object_compliance>
            <Function test_components_object_compliance>
            <Function test_operation_object_compliance>
            <Function test_schema_reference_resolution>
            <Function test_parameter_object_compliance>
            <Function test_response_object_compliance>
          <Class TestJSONSchemaValidation>
            <Function test_memory_create_schema_validation>
            <Function test_memory_response_schema_validation>
            <Function test_pagination_response_schema_validation>
            <Function test_error_response_schema_validation>
          <Class TestSchemaConsistency>
            <Function test_consistent_error_schemas>
            <Function test_consistent_uuid_format>
            <Function test_consistent_timestamp_format>
            <Function test_consistent_pagination_schema>
          <Class TestAPIContractStability>
            <Function test_required_fields_stability>
            <Function test_endpoint_stability>
            <Function test_http_method_stability>
            <Function test_response_schema_stability>
        <Module test_permissions_comprehensive.py>
          <Class TestMemoryAccessPermissions>
            <Function test_check_memory_access_permissions_active_memory_no_app>
            <Function test_check_memory_access_permissions_paused_memory>
            <Function test_check_memory_access_permissions_deleted_memory>
            <Function test_check_memory_access_permissions_active_memory_with_valid_app>
            <Function test_check_memory_access_permissions_nonexistent_app>
            <Function test_check_memory_access_permissions_inactive_app>
            <Function test_check_memory_access_permissions_unrestricted_app_access>
            <Function test_check_memory_access_permissions_restricted_app_access_allowed>
            <Function test_check_memory_access_permissions_restricted_app_access_denied>
          <Class TestAppPermissionValidation>
            <Function test_app_permission_with_uuid_app_id>
            <Function test_app_permission_with_string_app_id>
            <Function test_app_permission_query_structure>
            <Function test_app_permission_with_complex_app_hierarchy>
            <Function test_app_permission_caching_behavior>
          <Class TestUserPermissionValidation>
            <Function test_user_permission_inheritance>
            <Function test_user_permission_with_owner_access>
            <Function test_user_permission_with_guest_access>
            <Function test_user_permission_with_shared_access>
          <Class TestSecurityEdgeCases>
            <Function test_sql_injection_protection_in_app_id>
            <Function test_unauthorized_memory_access_attempt>
            <Function test_memory_state_tampering_protection>
            <Function test_app_state_tampering_protection>
            <Function test_permission_escalation_prevention>
            <Function test_race_condition_protection>
            <Function test_database_transaction_isolation>
          <Class TestPermissionCaching>
            <Function test_permission_result_consistency>
            <Function test_permission_with_different_memory_states>
            <Function test_permission_performance_with_large_datasets>
            <Function test_permission_memory_optimization>
        <Module test_routers.py>
          <Class TestMemoriesRouter>
            <Coroutine test_list_memories_success>
            <Coroutine test_list_memories_with_search>
            <Coroutine test_list_memories_with_pagination>
            <Coroutine test_create_memory_success>
            <Coroutine test_create_memory_with_metadata>
            <Coroutine test_create_memory_client_error>
            <Coroutine test_get_memory_success>
            <Coroutine test_get_memory_not_found>
            <Coroutine test_get_memory_client_error>
            <Coroutine test_search_memories_success>
            <Coroutine test_get_categories_empty>
          <Class TestAppsRouter>
            <Coroutine test_list_apps_success>
            <Coroutine test_list_apps_with_filters>
            <Coroutine test_list_apps_with_pagination>
            <Coroutine test_get_app_memories_success>
            <Coroutine test_get_app_memories_not_found>
            <Coroutine test_get_app_memories_with_pagination>
          <Class TestStatsRouter>
            <Coroutine test_get_profile_success>
            <Coroutine test_get_profile_new_user>
            <Coroutine test_get_profile_memory_client_error>
          <Class TestConfigRouter>
            <Coroutine test_get_configuration_success>
            <Coroutine test_update_configuration_success>
            <Coroutine test_get_openmemory_configuration>
            <Coroutine test_update_openmemory_configuration>
          <Class TestErrorHandling>
            <Coroutine test_invalid_json_request>
            <Coroutine test_missing_required_fields>
            <Coroutine test_invalid_uuid_format>
            <Coroutine test_nonexistent_endpoint>
          <Class TestValidation>
            <Coroutine test_memory_creation_validation>
            <Coroutine test_pagination_validation>
            <Coroutine test_search_query_validation>
        <Module test_security_api.py>
          <Class TestEndpointAuthorization>
            <Coroutine test_unauthorized_endpoint_access>
            <Coroutine test_cross_user_data_access_prevention>
            <Coroutine test_admin_endpoint_protection>
            <Coroutine test_method_based_access_control>
          <Class TestDataExposurePrevention>
            <Coroutine test_sensitive_data_exposure_in_responses>
            <Coroutine test_error_message_information_disclosure>
            <Coroutine test_pagination_data_exposure>
            <Coroutine test_metadata_exposure_prevention>
          <Class TestAPIAbuseProtection>
            <Coroutine test_large_payload_protection>
            <Coroutine test_nested_object_protection>
            <Coroutine test_array_size_protection>
            <Coroutine test_parameter_pollution_protection>
          <Class TestHTTPMethodValidation>
            <Coroutine test_method_override_protection>
            <Coroutine test_unsupported_method_protection>
          <Class TestAPISecurityIntegration>
            <Coroutine test_end_to_end_security_validation>
            <Coroutine test_concurrent_security_validation>
        <Module test_security_authentication.py>
          <Class TestAuthenticationSecurity>
            <Function test_user_id_validation_security>
            <Function test_unauthorized_memory_access_prevention>
            <Function test_app_permission_boundary_enforcement>
            <Function test_memory_state_access_control>
            <Function test_access_control_rules_enforcement>
            <Coroutine test_api_endpoint_authentication_bypass_attempts>
            <Coroutine test_memory_creation_unauthorized_access>
            <Function test_session_security_validation>
            <Function test_permission_escalation_prevention>
          <Class TestAuthenticationIntegration>
            <Coroutine test_end_to_end_auth_flow>
            <Coroutine test_concurrent_authentication_security>
            <Function test_auth_error_handling_security>
        <Module test_security_headers.py>
          <Class TestCORSValidation>
            <Coroutine test_cors_headers_present>
            <Coroutine test_cors_preflight_request>
            <Coroutine test_cors_origin_validation>
            <Coroutine test_cors_credentials_handling>
          <Class TestSecurityHeaders>
            <Coroutine test_security_headers_present>
            <Coroutine test_content_security_policy>
            <Coroutine test_hsts_header>
            <Coroutine test_xss_protection_header>
            <Coroutine test_content_type_options_header>
            <Coroutine test_frame_options_header>
          <Class TestResponseHeaderSecurity>
            <Coroutine test_server_header_disclosure>
            <Coroutine test_powered_by_header_disclosure>
            <Coroutine test_version_header_disclosure>
            <Coroutine test_cache_control_headers>
          <Class TestSecurityHeadersIntegration>
            <Coroutine test_security_headers_across_endpoints>
            <Coroutine test_security_headers_consistency>
            <Coroutine test_post_request_security_headers>
        <Module test_security_input_validation.py>
          <Class TestSQLInjectionPrevention>
            <Coroutine test_memory_list_sql_injection>
            <Coroutine test_memory_creation_sql_injection>
            <Coroutine test_search_query_sql_injection>
          <Class TestXSSPrevention>
            <Coroutine test_memory_content_xss_prevention>
            <Coroutine test_metadata_xss_prevention>
            <Coroutine test_search_query_xss_prevention>
          <Class TestParameterValidation>
            <Function test_invalid_uuid_handling>
            <Coroutine test_pagination_parameter_validation>
            <Coroutine test_date_parameter_validation>
            <Coroutine test_sort_parameter_validation>
          <Class TestMaliciousPayloadDetection>
            <Function test_command_injection_prevention>
            <Function test_ldap_injection_prevention>
            <Function test_xml_injection_prevention>
            <Function test_path_traversal_prevention>
          <Class TestInputValidationIntegration>
            <Coroutine test_comprehensive_malicious_request>
            <Coroutine test_batch_malicious_requests>
        <Module test_security_integration.py>
          <Class TestMultiLayerSecurity>
            <Coroutine test_comprehensive_security_audit>
            <Coroutine test_security_policy_enforcement>
            <Coroutine test_cross_component_security>
          <Class TestSecurityRegressionPrevention>
            <Coroutine test_known_vulnerability_patterns>
            <Coroutine test_security_configuration_validation>
          <Class TestSecurityMonitoring>
            <Coroutine test_security_event_logging>
            <Coroutine test_security_metrics_collection>
        <Module test_security_rate_limiting.py>
          <Class TestRateLimitingMechanisms>
            <Function test_rate_limit_calculation_logic>
            <Function test_burst_detection_logic>
            <Function test_sliding_window_logic>
          <Class TestAPIRateLimiting>
            <Coroutine test_memory_list_rate_limiting>
            <Coroutine test_memory_creation_rate_limiting>
            <Coroutine test_concurrent_request_limiting>
          <Class TestBruteForceProtection>
            <Coroutine test_authentication_brute_force_protection>
            <Coroutine test_password_brute_force_simulation>
            <Coroutine test_account_lockout_simulation>
          <Class TestDDoSProtection>
            <Coroutine test_request_flood_protection>
            <Coroutine test_resource_exhaustion_protection>
            <Coroutine test_connection_flood_protection>
          <Class TestRateLimitingEdgeCases>
            <Function test_rate_limit_reset_logic>
            <Function test_distributed_rate_limiting>
            <Function test_rate_limit_bypass_attempts>
        <Module test_simple.py>
          <Class TestBasicFunctionality>
            <Function test_uuid_generation>
            <Function test_datetime_formatting>
            <Function test_basic_data_structures>
            <Function test_string_operations>
            <Function test_mathematical_operations>
            <Function test_boolean_operations>
          <Class TestValidationFunctions>
            <Function test_user_id_validation>
            <Function test_memory_content_validation>
            <Function test_pagination_logic>
          <Class TestDataFactories>
            <Function test_user_data_factory>
            <Function test_memory_data_factory>
            <Function test_data_factory_defaults>
          <Class TestErrorHandling>
            <Function test_exception_handling>
            <Function test_error_message_handling>
            <Function test_none_handling>
            <Function test_empty_string_handling>
        <Module test_utils.py>
          <Class TestMemoryUtils>
            <Function test_get_memory_client_success>
            <Function test_get_memory_client_error>
            <Function test_get_memory_client_none>
          <Class TestPermissionUtils>
            <Function test_check_memory_access_permissions_allowed>
            <Function test_check_memory_access_permissions_denied>
            <Function test_check_memory_access_permissions_no_app_filter>
          <Class TestDataFactoryUtils>
            <Function test_create_user_data>
            <Function test_create_user_data_default>
            <Function test_create_memory_data>
            <Function test_create_memory_data_default>
            <Function test_create_app_data>
            <Function test_create_app_data_default>
          <Class TestValidationUtils>
            <Function test_validate_user_id_valid>
            <Function test_validate_user_id_invalid>
            <Function test_validate_memory_content_valid>
            <Function test_validate_memory_content_invalid>
          <Class TestErrorHandlingUtils>
            <Function test_handle_database_error>
            <Function test_handle_memory_client_error>
            <Function test_handle_validation_error>
            <Function test_handle_timeout_error>
          <Class TestHelperUtils>
            <Function test_format_datetime>
            <Function test_generate_uuid>
            <Function test_dict_merge>
            <Function test_list_pagination>
  <Dir mem0>
    <Package tests>
      <Dir configs>
        <Module test_prompts.py>
          <Function test_get_update_memory_messages>
      <Dir embeddings>
        <Module test_azure_openai_embeddings.py>
          <Function test_embed_text>
          <Function test_embed_text_with_default_headers[None-None]>
          <Function test_embed_text_with_default_headers[default_headers1-test_value]>
          <Function test_embed_text_with_default_headers[default_headers2-None]>
        <Module test_gemini_emeddings.py>
          <Function test_embed_query>
          <Function test_embed_returns_empty_list_if_none>
          <Function test_embed_raises_on_error>
          <Function test_config_initialization>
        <Module test_huggingface_embeddings.py>
          <Function test_embed_default_model>
          <Function test_embed_custom_model>
          <Function test_embed_with_model_kwargs>
          <Function test_embed_sets_embedding_dims>
          <Function test_embed_with_custom_embedding_dims>
        <Module test_lm_studio_embeddings.py>
          <Function test_embed_text>
        <Module test_ollama_embeddings.py>
          <Function test_embed_text>
          <Function test_ensure_model_exists>
        <Module test_openai_embeddings.py>
          <Function test_embed_default_model>
          <Function test_embed_custom_model>
          <Function test_embed_removes_newlines>
          <Function test_embed_without_api_key_env_var>
          <Function test_embed_uses_environment_api_key>
      <Dir llms>
        <Module test_azure_openai.py>
          <Function test_generate_response_without_tools>
          <Function test_generate_response_with_tools>
          <Function test_generate_with_http_proxies[None]>
          <Function test_generate_with_http_proxies[default_headers1]>
        <Module test_deepseek.py>
          <Function test_deepseek_llm_base_url>
          <Function test_generate_response_without_tools>
          <Function test_generate_response_with_tools>
        <Module test_groq.py>
          <Function test_generate_response_without_tools>
          <Function test_generate_response_with_tools>
        <Module test_langchain.py>
          <Function test_langchain_initialization>
          <Function test_generate_response>
          <Function test_invalid_model>
          <Function test_missing_model>
        <Module test_litellm.py>
          <Function test_generate_response_with_unsupported_model>
          <Function test_generate_response_without_tools>
          <Function test_generate_response_with_tools>
        <Module test_lm_studio.py>
          <Function test_generate_response_without_tools>
          <Function test_generate_response_specifying_response_format>
        <Module test_ollama.py>
          <Function test_generate_response_without_tools>
        <Module test_openai.py>
          <Function test_openai_llm_base_url>
          <Function test_generate_response_without_tools>
          <Function test_generate_response_with_tools>
        <Module test_vllm.py>
          <Function test_generate_response_without_tools>
          <Function test_generate_response_with_tools>
      <Dir memory>
        <Module test_main.py>
          <Class TestAddToVectorStoreErrors>
            <Function test_empty_llm_response_fact_extraction>
            <Function test_empty_llm_response_memory_actions>
          <Class TestAsyncAddToVectorStoreErrors>
            <Coroutine test_async_empty_llm_response_fact_extraction>
            <Coroutine test_async_empty_llm_response_memory_actions>

==================================== ERRORS ====================================
[31m[1m______ ERROR collecting mem0/tests/embeddings/test_vertexai_embeddings.py ______[0m
[31mImportError while importing test module '/home/drj/projects/mem0-stack/mem0/tests/embeddings/test_vertexai_embeddings.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mem0/tests/embeddings/test_vertexai_embeddings.py:5: in <module>
    from mem0.embeddings.vertexai import VertexAIEmbedding
mem0/mem0/embeddings/vertexai.py:4: in <module>
    from vertexai.language_models import TextEmbeddingInput, TextEmbeddingModel
E   ModuleNotFoundError: No module named 'vertexai'[0m
[31m[1m_______________ ERROR collecting mem0/tests/llms/test_gemini.py ________________[0m
[31mImportError while importing test module '/home/drj/projects/mem0-stack/mem0/tests/llms/test_gemini.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mem0/tests/llms/test_gemini.py:4: in <module>
    from google.genai import types
E   ModuleNotFoundError: No module named 'google.genai'[0m
[31m[1m______________ ERROR collecting mem0/tests/llms/test_together.py _______________[0m
[31mImportError while importing test module '/home/drj/projects/mem0-stack/mem0/tests/llms/test_together.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
mem0/mem0/llms/together.py:6: in <module>
    from together import Together
E   ModuleNotFoundError: No module named 'together'

During handling of the above exception, another exception occurred:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mem0/tests/llms/test_together.py:6: in <module>
    from mem0.llms.together import TogetherLLM
mem0/mem0/llms/together.py:8: in <module>
    raise ImportError(
E   ImportError: The 'together' library is required. Please install it using 'pip install together'.[0m
[31m[1m__________ ERROR collecting mem0/tests/memory/test_neptune_memory.py ___________[0m
[31mImportError while importing test module '/home/drj/projects/mem0-stack/mem0/tests/memory/test_neptune_memory.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
mem0/mem0/graphs/neptune/main.py:6: in <module>
    from langchain_aws import NeptuneAnalyticsGraph
E   ModuleNotFoundError: No module named 'langchain_aws'

During handling of the above exception, another exception occurred:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mem0/tests/memory/test_neptune_memory.py:7: in <module>
    from mem0.graphs.neptune.main import MemoryGraph
mem0/mem0/graphs/neptune/main.py:8: in <module>
    raise ImportError(
E   ImportError: langchain_aws is not installed. Please install it using 'make install_all'.[0m
[31m[1m___________________ ERROR collecting mem0/tests/test_main.py ___________________[0m
[31mImportError while importing test module '/home/drj/projects/mem0-stack/mem0/tests/test_main.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   ModuleNotFoundError: No module named 'tests.test_main'[0m
------ generated xml file: /home/drj/projects/mem0-stack/test-results.xml ------
[36m[1m=========================== short test summary info ============================[0m
[31mERROR[0m mem0/tests/embeddings/test_vertexai_embeddings.py
[31mERROR[0m mem0/tests/llms/test_gemini.py
[31mERROR[0m mem0/tests/llms/test_together.py
[31mERROR[0m mem0/tests/memory/test_neptune_memory.py
[31mERROR[0m mem0/tests/test_main.py
[31m!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 5 failures !!!!!!!!!!!!!!!!!!!!!!!!!!![0m
[31m=================== [32m576 tests collected[0m, [31m5 errors[0m[31m in 13.24s[0m[31m ====================[0m
